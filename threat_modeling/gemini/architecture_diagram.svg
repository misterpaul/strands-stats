<svg width="900" height="400" xmlns="http://www.w3.org/2000/svg" font-family="sans-serif" font-size="14">
    <defs>
        <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#333" />
        </marker>
    </defs>

    <style>
        .actor { fill: #fff; stroke: #333; stroke-width: 2; }
        .process { fill: #e1f5fe; stroke: #0288d1; stroke-width: 2; }
        .datastore { fill: #fffde7; stroke: #fbc02d; stroke-width: 2; }
        .flow { stroke: #333; stroke-width: 1.5; marker-end: url(#arrow); }
        .label { text-anchor: middle; fill: #333; }
        .flow-label { font-size: 12px; font-style: italic; fill: #555; }
    </style>

    <!-- Components -->
    <g id="actor-player">
        <rect x="20" y="160" width="120" height="60" rx="10" class="actor" />
        <text x="80" y="195" class="label">Game Player</text>
    </g>

    <g id="process-gmail">
        <rect x="180" y="160" width="120" height="60" rx="10" class="process" />
        <text x="240" y="195" class="label">Gmail</text>
    </g>

    <g id="process-appsscript">
        <rect x="340" y="50" width="120" height="70" rx="10" class="process" />
        <text x="400" y="80" class="label">Apps Script</text>
        <text x="400" y="100" class="label">(Forwarder)</text>
    </g>

    <g id="datastore-gcs">
        <rect x="340" y="250" width="120" height="70" rx="10" class="datastore" />
        <text x="400" y="280" class="label">GCS Bucket</text>
        <text x="400" y="300" class="label">(Incoming)</text>
    </g>

    <g id="process-function">
        <rect x="530" y="160" width="120" height="70" rx="10" class="process" />
        <text x="590" y="185" class="label">Cloud Function</text>
        <text x="590" y="205" class="label">(Parser)</text>
    </g>

    <g id="datastore-firestore">
        <rect x="710" y="160" width="120" height="60" rx="10" class="datastore" />
        <text x="770" y="195" class="label">Firestore DB</text>
    </g>

    <!-- Trust Boundary -->
    <rect x="160" y="20" width="690" height="360" rx="15" fill="none" stroke="#9e9e9e" stroke-width="2" stroke-dasharray="8,4" />
    <text x="230" y="45" fill="#9e9e9e" font-weight="bold">Google Cloud Project</text>

    <!-- Data Flows -->
    <g>
        <line x1="140" y1="190" x2="180" y2="190" class="flow" />
        <text x="160" y="180" class="flow-label">1. Sends Email</text>
    </g>
    <g>
        <path d="M 240 160 Q 290 120, 340 90" fill="none" class="flow" />
        <text x="290" y="135" class="flow-label">2. Reads Email</text>
    </g>
    <g>
        <path d="M 400 120 V 250" fill="none" class="flow" />
        <text x="410" y="185" class="flow-label">3. Writes .eml</text>
    </g>
    <g>
        <line x1="460" y1="285" x2="530" y2="205" class="flow" />
        <text x="495" y="255" class="flow-label">4. Triggers Function</text>
    </g>
    <g>
        <line x1="650" y1="190" x2="710" y2="190" class="flow" />
        <text x="680" y="180" class="flow-label">5. Writes Data</text>
    </g>

</svg>